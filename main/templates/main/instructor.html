{% extends 'main/layout.html' %}
{% load static %}
{% block head %}
<title>Instructor Profile</title>
<link href="{% static 'main/css/profile.css' %}" rel="stylesheet">
<link href="{% static 'main/css/cred.css' %}" rel="stylesheet">
{% endblock head %}
{% block body %}
<div class="assign_form" style="display: none;" id="assignmentForm">
    <div class="assign_child1">
        <form class="cred_form" action="{% url 'instructor' %}" method="POST">
            <h1 style="color: green;">New Assignment</h1>
            {% csrf_token %}
            <select class="cred" placeholder="Course" name="course">
            <option disabled selected>Select a Course</option>
                {% for course in courses %}
                    <option value="{{course}}">{{course}}</option>
                {% endfor %}
            </select>
            <input class="cred" type="text" placeholder="Subject" name="assignmentSubject">
            <br>
            <span>
            <select class="cred" placeholder="Simulator" name="sim">
                <option disabled selected>Select a Simulator</option>
                {% for simulator in simulators %}
                <option value="{{simulator}}">{{simulator}}</option>
                {% endfor %}
            </select>
            <select class="cred" >
                <option selected disabled>Choose Controler</option>
                <option value="P">P</option>
                <option value="PI">PI</option>
                <option value="PD">PD</option>
                <option value="PID">PID</option>
                <option value="lag">Lag</option>
                <option value="lead">Lead</option>
                <option value="laglead">Lag-Lead</option>
              </select>
            </span>
            <br>
            <input class="cred" type="date" placeholder="dueDate" name="due">
            <br>
            <textarea cols="30" rows="3" class="cred" type="textarea" placeholder="Describtion" name="desc"></textarea>
            <br>
            {% if message %}
            <h5 style="color: red;">{{message}}</h5>
            {% endif %}
            <button type="button" class="button" onclick="closeAssignmentForm()">Cancel</button>
            <button class="button" type="submit">Save</button>
        </form>
    </div>
</div>
<div class="assign_form" style="display: none;" id="courseForm">
    <div class="assign_child2">
        <form class="cred_form" action="{% url 'instructor' %}" method="POST">
            <h1 style="color: green;">New Course</h1>
            {% csrf_token %}
            <input class="cred" type="text" placeholder="courseName" name="courseName">
            <br>
            {% if message %}
            <h5 style="color: red;">{{message}}</h5>
            {% endif %}
            <button type="button" class="button" onclick="closeCourseForm()">Cancel</button>
            <button class="button" type="submit">Save</button>
        </form>
    </div>
</div>

<div class="profile" style="display:flex;">
    <span><img src="{% static 'main/images/profile.png' %}" alt="instructor's Photo"
            style="width:100px;height:100px"></span>
    <span>
        <h4>{{instructor.credentials.first_name}} {{instructor.credentials.last_name}}</h4>
        <h4>Major: <small style="color: black;">{{instructor.major}}</small></h4>
    </span>
</div>
<div class="profile" style="display:flex;" id="assignment">
    <span onclick="openCourseForm()"><img src="{% static 'main/images/plus.png' %}" alt="instructor's Photo"
            style="width:25px;height:25px"></span>
    <span onclick="openCourseForm()">
        <h6>New Course</h6>
    </span>
    <span onclick="openAssignmentForm()"><img src="{% static 'main/images/plus.png' %}" alt="instructor's Photo"
            style="width:25px;height:25px"></span>
    <span onclick="openAssignmentForm()">
        <h6>New Assignment</h6>
    </span>
</div>
<div class="profile" style="margin-top: -10px;">
    <form action="{% url 'instructor' %}" method="POST">
        {% csrf_token %}
        <h4>See Student Submissions:</h4>
        <select onchange="courseSelector({{courses}});" id="courseSelect" name="course" style=" border: green solid 1px; border-radius: 10px;outline:none">
            <option disabled selected>Select a Course</option>
            {% for course,value in courseAssignment.items %}
            <option value="{{course}}">{{course}}</option>
            {% endfor %}
        </select>
        <select onchange="assignmentsSubmitted()" name="assign" id="assignmentSelect" style=" border: green solid 1px; border-radius: 10px;outline:none">
            <option value="Select an Assignment" disabled selected>Select an Assignment</option>
            {% for course,values in courseAssignment.items %}
                {% for value in values %}
                <option style="display: none;" class="{{course}}" value="{{value}}">{{value}}</option>
                {% endfor %}
            {% endfor %}
        </select>
    </form>
</div>
<table class="table">
    <tr>
        <th>Assignment</th>
        <th>Students</th>
        <th>Score</th>
        <th>Date Submitted / Due</th>
    </tr>
    {% for key,values in assignmentSubmission.items %}
    <tr class="tr" id="{{key}}" style="display: none;">
    {% if values %}
    {% for value in values %}
        <td>{{value.assignment.subject}}</td>
        <td>{{value.student}}</td>
        <td>{{value.score}}/{{value.assignment.score}}</td>
        <td>{{value.dateSubmitted}}/{{value.assignment.dueDate}}</td>
    {% endfor %}
    {% else %}
           <td><h3>No Submissions Yet</h3></td>
    {% endif %}
    </tr>
    {% endfor %}
</table>
<script src="{% static 'main/script/instructor.js' %}"></script>
{% endblock body %}